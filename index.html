<html>
  <body>
    <a href="#" style="font-size:12em;">aaaa</a>
    <script src="recorder.js" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
      n = navigator;
      function onSuccess(stream) {
        var context = new webkitAudioContext();
        var mediaStreamSource = context.createMediaStreamSource(stream);
        var rec = new Recorder(mediaStreamSource);
        rec.record();
            // export a wav every second, so we can send it using websockets
                   intervalKey = setInterval(function() {
                       rec.exportWAV(function(blob) {
                           reader = new FileReader();
                           console.log(blob);
                           rec.clear();
                           output = reader.readAsArrayBuffer(blob);
                           debugger
                       });
                   }, 1000);


      }

      function onError(e) {
        console.log(e);
        console.log('nope :(');
        // womp, womp :(
      }


      document.querySelector('a').addEventListener('click', function() {
        navigator.webkitGetUserMedia({ audio: true }, onSuccess);
      });

    </script>
  </body>
</html>
